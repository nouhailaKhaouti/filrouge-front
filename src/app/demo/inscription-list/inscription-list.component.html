<div #result class="modal fade" id="result" tabindex="-1" aria-labelledby="resultModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
  
        <div class="modal-header bg-info ">
          <h5 class="modal-title text-white " id="resultModalLabel">
            Add Writin Exam Result
          </h5>
          <button type="button" class="btn btn-close text-white" (click)="closeModal()"
          aria-label="Close"></button>
        </div>
        <div class="modal-body card text-dark d-flex justify-content-around">
          <form (ngSubmit)="submitForm()">
              <div class="card-body text-center">
                <div class="mb-4">
                    <svg viewBox="0 0 1024 1024" class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="#000000" height="100px" width="100px"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M892.937 316.002v447.525H338.394V167.652h394.663z" fill="#c5fbfc"></path><path d="M892.937 775.527H338.395l-12-12V167.652l12-12h394.663l8.162 3.204 159.879 148.349 3.838 8.796v447.526l-12 12z m-542.542-24h530.542v-430.29L728.348 179.652H350.395v571.875z" fill="#300604"></path><path d="M733.057 167.652v148.349h159.88z" fill="#26edc6"></path><path d="M892.937 328.001h-159.88l-12-12V167.652l20.162-8.796 159.88 148.349-8.162 20.796z m-147.88-24h117.305L745.057 195.157v108.844z" fill="#300604"></path><path d="M206.23 186.859c0 21.025 17.043 38.068 38.068 38.068h31.664-31.664c-21.025 0-38.068 17.044-38.068 38.069v31.664-31.664c0-21.025-17.044-38.069-38.069-38.069h-31.664 31.664c21.025-0.001 38.069-17.044 38.069-38.068v-31.664 31.664z" fill="#26edc6"></path><path d="M219.178 294.655h-25.892v-31.658c0-13.857-11.269-25.125-25.126-25.125h-31.665V211.98h31.665c13.857 0 25.126-11.269 25.126-25.126v-31.657h25.892v31.657c0 13.857 11.268 25.126 25.116 25.126v25.892c-13.848 0-25.116 11.268-25.116 25.125v31.658z m-17.093-69.729a50.857 50.857 0 0 1 4.147 4.146 49.209 49.209 0 0 1 4.138-4.146 49.22 49.22 0 0 1-4.138-4.147 50.711 50.711 0 0 1-4.147 4.147z m73.876 12.947h-31.666V211.98h31.666v25.893z" fill="#26edc6"></path><path d="M447.299 387.858l-28.228-11.979 74.505-175.709 74.014 175.749-28.269 11.899-45.846-108.872z" fill="#B12800"></path><path d="M454.267 315.73h75.662v30.664h-75.662z" fill="#B12800"></path><path d="M568.225 671.374h-13.37c-13.731-68.13-73.741-118.041-144.493-118.041-77.514 0-141.249 60.121-147.029 136.187h-67.089c-43.881 0-79.587 35.705-79.587 79.595 0 43.881 35.706 79.586 79.587 79.586h371.981c48.889 0 88.663-39.775 88.663-88.663 0-48.889-39.773-88.664-88.663-88.664z" fill="#300604"></path><path d="M568.225 820.159H196.244c-28.142 0-51.045-22.902-51.045-51.044 0-28.152 22.903-51.054 51.045-51.054h81.007l14.727-0.865-0.53-16.408c0-65.566 53.348-118.914 118.915-118.914 60.53 0 111.315 45.302 118.125 105.378l1.431 12.663h38.307c33.15 0 60.121 26.972 60.121 60.122 0 33.151-26.971 60.122-60.122 60.122z" fill="#228E9D"></path><path d="M503.365 701.774h-28.542c0-36.169-29.424-65.594-65.594-65.594v-28.542c51.909 0 94.136 42.228 94.136 94.136zM215.692 554.474h28.542v67.255h-28.542zM153.951 454.917h28.542v119.801h-28.542zM153.955 592.977h28.542v37.219h-28.542zM153.955 651.994h28.542v21.887h-28.542zM215.693 347.04h28.542v128.828h-28.542zM542.9 448.065h30.664v46.405H542.9zM402.407 445.048h30.664v43.57h-30.664zM477.999 467.384h30.664v21.79h-30.664zM438.583 864.164H565.6v28.542H438.583zM693.638 425.064h136.461v30.664H693.638zM693.638 492.924h136.461v30.664H693.638z" fill="#300604"></path><path d="M693.638 590.688h136.461v30.664H693.638z" fill="#300604"></path><path d="M693.638 658.549h136.461v30.664H693.638z" fill="#300604"></path><path d="M675.249 797.028h88.914v28.542h-88.914z" fill="#300604"></path><path d="M152.044 334.067c0 7.775 6.303 14.079 14.079 14.079h11.71-11.71c-7.775 0-14.079 6.303-14.079 14.078v11.71-11.71c0-7.775-6.303-14.078-14.078-14.078h-11.71 11.71c7.775-0.001 14.078-6.304 14.078-14.079v-11.71 11.71z" fill="#26edc6"></path><path d="M156.995 373.933h-9.903v-11.71c0-5.034-4.094-9.128-9.126-9.128h-11.71v-9.903h11.71c5.032 0 9.126-4.094 9.126-9.126v-11.71h9.903v11.71c0 5.032 4.094 9.126 9.128 9.126v9.903c-5.034 0-9.128 4.094-9.128 9.128v11.71z m-6.239-25.788c0.45 0.408 0.88 0.838 1.288 1.288 0.408-0.45 0.838-0.88 1.288-1.288-0.45-0.408-0.88-0.838-1.288-1.288-0.408 0.449-0.838 0.88-1.288 1.288z m27.077 4.951h-11.71v-9.903h11.71v9.903z" fill="#26edc6"></path></g></svg>                
                </div>
                <ng-container *ngFor="let module of concour.modules">
                    <div class="input-group mb-4 ">
                            <p class="fw-bold">{{module.reference}}</p>
                            <input type="number" style="height: max-content; background-color: #EBEBEB;" placeholder="Enter note here" class="w-100 border-0 rounded-3 p-3 bg- m-2" (change)="addToModules(module.reference, $event)">                   
                    </div>
                </ng-container>
                <button  class="btn btn-info mb-4" (click)="closeModal()">Close</button>
                <button  class="btn btn-success mb-4" type="submit">Submit</button>
              </div>
          </form>
        </div>
      </div>
    </div>
</div>

<!-- Check Box table -->
<div #seats class="modal fade" id="seats" tabindex="-1" aria-labelledby="seatsModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header bg-info ">
          <h5 class="modal-title text-white " id="seatsModalLabel">
          </h5>
          <button type="button" class="btn btn-close text-white" (click)="closeListModal()"
          aria-label="Close"></button>
        </div>
        <div class="modal-body card text-dark d-flex justify-content-around">
            <div>
                <div class="input-group mb-4">
                    <input type="text" class="form-control rounded-3" [(ngModel)]="searchTerm" placeholder="Search by CIN" (keyup)="search()"/>
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="50px" height="50px"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path opacity="0.1" fill-rule="evenodd" clip-rule="evenodd" d="M12 3C4.5885 3 3 4.5885 3 12C3 19.4115 4.5885 21 12 21C19.4115 21 21 19.4115 21 12C21 4.5885 19.4115 3 12 3ZM11.5 7.75C9.42893 7.75 7.75 9.42893 7.75 11.5C7.75 13.5711 9.42893 15.25 11.5 15.25C13.5711 15.25 15.25 13.5711 15.25 11.5C15.25 9.42893 13.5711 7.75 11.5 7.75Z" fill="#74b1d8"></path> <path d="M3 12C3 4.5885 4.5885 3 12 3C19.4115 3 21 4.5885 21 12C21 19.4115 19.4115 21 12 21C4.5885 21 3 19.4115 3 12Z" stroke="#74b1d8" stroke-width="2"></path> <path d="M14 14L16 16" stroke="#74b1d8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M15 11.5C15 13.433 13.433 15 11.5 15C9.567 15 8 13.433 8 11.5C8 9.567 9.567 8 11.5 8C13.433 8 15 9.567 15 11.5Z" stroke="#74b1d8" stroke-width="2"></path> </g></svg>                </div>
            </div>
          <form (submit)="submitSeatForm()">
              <div class="card-body text-center table-responsive">
                <table class="table table-hover mb-0">
                    <thead>
                      <tr>
                        <th>Check Box</th>
                        <th>Cin</th>
                        <th>Full name</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let inscription of inscriptions; let i = index" [style.display]="visibleRows[i] ? 'table-row' : 'none'">
                        <td><input type="checkbox" [checked]="isChecked(inscription)" (change)="toggleCheck(inscription)" [disabled]="isCheckboxDisabled(inscription.cin)" ></td>
                        <td>{{ inscription.cin }}</td>
                        <td>{{inscription.nom}} {{inscription.prenom}}</td>
                      </tr>
                    </tbody>
                  </table>
                <button  class="btn btn-info mt-5" (click)="closeListModal()">Close</button>
                <button  class="btn btn-success mt-5" type="submit">Submit</button>
              </div>
          </form>
        </div>
      </div>
    </div>
</div>
<div class="row">
    <div class="col-sm-12 bg-light">
        <app-card
        cardTitle="Inscritions"
        cardClass="Inscritions"
        blockClass="p-0"
        >
        <button  class="btn btn-dark position-absolute top-0 end-0 border rounded-circle m-5" (click)="PdfGenerate('all')" > 
Pdf        </button>
        <button  class="btn btn-light position-absolute top-0 border rounded-circle m-5" style="right:85px;" (click)="openListModal('preselection')" > 
         +
        </button>
        <div class="table-responsive">
          <table class="table table-hover mb-0">
              <thead style="background-color: #17a2b8; 
              color: white;">
                <tr >
                    <th scope="col">Full Name</th>
                    <th scope="col">CIN</th>
                    <th scope="col">CNE</th>
                    <th scope="col">Score</th>
                    <th scope="col">Action</th>
                </tr>
              </thead>
            <tbody *ngFor="let inscription of inscriptions ">
              
                <tr class="unread">
                  <td>
                      <p class="m-0">{{ inscription.nom}} {{ inscription.prenom }}</p>
                  </td>
                  <td>
                    <p class="m-0 ">{{inscription.cin}}</p>
                  </td>
                  <td>
                    <p class="m-0 text-decoration-underline">{{inscription.cne}}</p>
                  </td>
                  <td>
                    <ng-container *ngFor="let choix of inscription.choixs">
                    <ng-container *ngIf="choix.concour.reference === concour.reference">
                        <h6 *ngIf="isBeforeEcritDate()" class="mb-1 label  text-white f-12 rounded-4" style="background-color:#4682B4"> {{ choix.result.notePreselection}}</h6>
                        <h6 *ngIf="isBetweenEcritAndOralDate()" class="mb-1 label text-white f-12 rounded-4" style="background-color:#4682B4"> {{ choix.result.noteWriting }}</h6>
                        <h6 *ngIf="isAfterOralDate()" class=" mb-1 label  text-white f-12 rounded-4" style="background-color:#4682B4"> {{ choix.result.noteOral }}</h6>
                      </ng-container>
                    </ng-container> 
                  </td>
                  <td>
                    <div class="action-buttons me-4 mt-2">
                        <button class="btn btn-primary border rounded-3 mx-5" (click)="writingResult(inscription)">
                            <svg fill="#fefbfb" viewBox="0 0 32 32" id="icon" xmlns="http://www.w3.org/2000/svg" stroke="#fefbfb" width="22" height="22"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#0d6efd" stroke-width="3.2640000000000002"> <defs> <style> .cls-1 { fill: none; } </style> </defs> <rect id="_Transparent_Rectangle_" data-name="<Transparent Rectangle>" class="cls-1" width="32" height="32"></rect> <rect x="10" y="13" width="2" height="2"></rect> <rect x="14" y="13" width="8" height="2"></rect> <rect x="10" y="18" width="2" height="2"></rect> <rect x="10" y="23" width="2" height="2"></rect> <path d="M7,28V7h3v3H22V7h3v8h2V7a2,2,0,0,0-2-2H22V4a2,2,0,0,0-2-2H12a2,2,0,0,0-2,2V5H7A2,2,0,0,0,5,7V28a2,2,0,0,0,2,2h9V28ZM12,4h8V8H12Z"></path> <path d="M18,19v2.4131A6.996,6.996,0,1,1,24,32V30a5,5,0,1,0-4.5762-7H22v2H16V19Z"></path> <rect id="_Transparent_Rectangle_2" data-name="<Transparent Rectangle>" class="cls-1" width="32" height="32"></rect> </g><g id="SVGRepo_iconCarrier"> <defs> <style> .cls-1 { fill: none; } </style> </defs> <rect id="_Transparent_Rectangle_" data-name="<Transparent Rectangle>" class="cls-1" width="32" height="32"></rect> <rect x="10" y="13" width="2" height="2"></rect> <rect x="14" y="13" width="8" height="2"></rect> <rect x="10" y="18" width="2" height="2"></rect> <rect x="10" y="23" width="2" height="2"></rect> <path d="M7,28V7h3v3H22V7h3v8h2V7a2,2,0,0,0-2-2H22V4a2,2,0,0,0-2-2H12a2,2,0,0,0-2,2V5H7A2,2,0,0,0,5,7V28a2,2,0,0,0,2,2h9V28ZM12,4h8V8H12Z"></path> <path d="M18,19v2.4131A6.996,6.996,0,1,1,24,32V30a5,5,0,1,0-4.5762-7H22v2H16V19Z"></path> <rect id="_Transparent_Rectangle_2" data-name="<Transparent Rectangle>" class="cls-1" width="32" height="32"></rect> </g></svg>                        
                        </button>
                    </div>
                  </td>
                </tr>
            </tbody>
          </table>
          <!-- if data not exist -->
          <div *ngIf="inscriptions.length <= 0" class="alert alert-primary d-flex align-items-center mx-5 mt-5 mb-3"role="alert">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-exclamation-triangle-fill flex-shrink-0 me-2" viewBox="0 0 16 16" role="img" aria-label="Warning:">
              <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
            </svg>
            <div>
              there's no Student in our data base for the moment please try again later.
            </div>
          </div>
        </div>
      </app-card>
    </div>
  </div>